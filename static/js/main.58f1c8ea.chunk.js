(this.webpackJsonpfirechat=this.webpackJsonpfirechat||[]).push([[0],{63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var s=a(7),c=a.n(s),r=a(31),n=a.n(r),o=a(0),i=a.n(o),l=a(1),d=a(11),b=a(12),u=a(30),m=a(45),j=a(25),h=a(26),f=(Object(m.a)({}),Object(j.c)()),g=Object(h.d)();Object(h.c)(g).catch((function(e){"failed-precondition"===e.code||e.code}));var x=a(6),p=Object(s.createContext)(),v=function(){return Object(s.useContext)(p)},O=function(e){var t=Object(s.useState)(),a=Object(d.a)(t,2),c=a[0],r=a[1],n=Object(s.useState)(!0),o=Object(d.a)(n,2),i=o[0],l=o[1];Object(s.useEffect)((function(){return Object(j.d)(f,(function(e){localStorage.setItem("auth-token","firechat "+e.token),console.log(localStorage.getItem("auth-token")),r(e),l(!1)}))}),[]);var b={currentUser:c,signup:function(e,t){return Object(j.b)(f,e,t)},login:function(e,t){return Object(j.f)(f,e,t)},logout:function(){return Object(j.g)(f)},editProfile:function(e,t,a,s){var r=j.a.credential(e,t);Object(j.e)(c,r).then((function(){null!==a&&""!==a&&Object(j.h)(f.currentUser,{displayName:a}).then((function(){s("DisplayName Updated sucessfully"),console.log("username updated sucessfully")})).catch((function(e){s("Error updating Display Name, Try again"),console.log("error updating username"),console.log(e)}))})).catch((function(e){s("Wrong Credentials"),console.log(e)}))}};return Object(x.jsx)(p.Provider,{value:b,children:!i&&e.children})},y=function(){var e=Object(s.useState)(""),t=Object(d.a)(e,2),a=t[0],c=t[1],r=Object(s.useState)(""),n=Object(d.a)(r,2),o=n[0],m=n[1],j=v(),h=j.signup,f=j.currentUser,g=Object(s.useState)(""),p=Object(d.a)(g,2),O=p[0],y=p[1],w=Object(s.useState)(!1),N=Object(d.a)(w,2),U=N[0],k=N[1],V=Object(b.g)(),A=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c(""),m(""),e.prev=3,y(""),k(!0),e.next=8,h(a,o);case 8:V.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),y("Failed to SignIn"),console.log(e.t0);case 15:k(!1);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return console.log("signup",f),Object(x.jsxs)("div",{className:"h-screen items-center justify-center flex flex-col",children:[""!==O&&Object(x.jsx)("h1",{children:O}),Object(x.jsxs)("form",{className:"border border-solid rounded-lg m-2 flex flex-col items-center justify-center space-y-3 h-96 w-96",children:[Object(x.jsx)("h1",{children:"Signup"}),Object(x.jsx)("label",{children:"Enter Email"}),Object(x.jsx)("input",{className:"w-3/4 h-8 border-black border border-solid rounded-sm",type:"text",placeholder:"Enter email",value:a,onChange:function(e){return c(e.target.value)}}),Object(x.jsx)("label",{children:"Enter Password"}),Object(x.jsx)("input",{className:"w-3/4 h-8 border-black border border-solid rounded-sm",type:"password",placeholder:"Enter password",value:o,onChange:function(e){return m(e.target.value)}}),Object(x.jsx)("button",{type:"submit",disabled:U,className:"w-36 h-8 rounded-sm bg-blue-700 text-center border-solid border border-blue-700",onClick:A,children:"SignUp"}),Object(x.jsx)("h2",{children:"Already Have an Account? "}),Object(x.jsx)(u.b,{to:"/login",children:Object(x.jsx)("button",{className:"w-40 bg-green-500 h-8",children:"LogIn"})})]})]})},w=(a(63),a(64),function(){var e=Object(s.useState)(""),t=Object(d.a)(e,2),a=t[0],c=t[1],r=Object(s.useState)(""),n=Object(d.a)(r,2),o=n[0],m=n[1],j=v(),h=j.login,f=j.currentUser,g=Object(s.useState)(""),p=Object(d.a)(g,2),O=p[0],y=p[1],w=Object(s.useState)(!1),N=Object(d.a)(w,2),U=N[0],k=N[1],V=Object(b.g)(),A=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c(""),m(""),e.prev=3,y(""),k(!0),e.next=8,h(a,o);case 8:V.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),y("failed to login"),console.log(e.t0);case 15:k(!1);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return console.log("login",f),Object(x.jsxs)("div",{className:"h-screen items-center justify-center flex flex-col",children:[""!==O&&Object(x.jsx)("h1",{children:O}),Object(x.jsxs)("form",{className:"border border-solid rounded-lg m-2 flex flex-col items-center justify-center space-y-4 h-96 w-96",children:[Object(x.jsx)("h1",{children:"Login"}),Object(x.jsx)("label",{children:"Enter Email"}),Object(x.jsx)("input",{className:"w-3/4 h-8 border-black border border-solid rounded-sm",type:"text",placeholder:"Enter email",value:a,onChange:function(e){return c(e.target.value)}}),Object(x.jsx)("label",{children:"Enter Password"}),Object(x.jsx)("input",{className:"w-3/4 h-8 border-black border border-solid rounded-sm",type:"password",placeholder:"Enter password",value:o,onChange:function(e){return m(e.target.value)}}),Object(x.jsx)("button",{type:"submit",disabled:U,className:"w-36 h-8 mt-5 rounded-sm bg-blue-700 text-center border-solid border border-blue-700",onClick:A,children:"Login"}),Object(x.jsx)("h2",{children:"Do not Have an Account? "}),Object(x.jsx)(u.b,{to:"/signup",children:Object(x.jsx)("button",{className:"w-40 bg-green-500 h-8",children:"SignUp"})})]})]})}),N=a(37),U=a(49),k=function(e){var t=e.component,a=Object(U.a)(e,["component"]),s=v().currentUser;return Object(x.jsx)(b.b,Object(N.a)(Object(N.a)({},a),{},{render:function(e){return s?Object(x.jsx)(t,Object(N.a)({},e)):Object(x.jsx)(b.a,{to:"/login"})}}))},V=Object(s.createContext)(),A=function(){return Object(s.useContext)(V)},H=function(e){console.log(Object(h.e)());var t={addData:function(e,t){return Object(h.a)(Object(h.b)(g,"messages"),{text:e,createdAt:Object(h.e)(),email:t.email,uid:t.uid,image:null===t.photoURL?"https://avatars.dicebear.com/api/gridy/".concat(t.email.substring(0,t.email.lastIndexOf("@")),".svg?background=%239999ff"):t.photoURL})},data:[{uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",createdAt:{seconds:1631960059,nanoseconds:642e6},email:"test@test.com",text:"hello",id:"Qx5p8ZurQflZcdQTCu0D"},{image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",createdAt:{seconds:1631960054,nanoseconds:143e6},text:"hello",email:"test@test.com",id:"v5CgEIRX4q4vP28xDlTT"},{email:"test@test.com",uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",createdAt:{seconds:1631959671,nanoseconds:256e6},text:"j;j;d",id:"W8d5lrdn6n2y7fYcytiq"},{image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",email:"test@test.com",uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",text:"dkl;hna;df",createdAt:{seconds:1631959669,nanoseconds:572e6},id:"uI0pk0PU6gsREot7IERL"},{text:"jdlak",image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",email:"test@test.com",createdAt:{seconds:1631959668,nanoseconds:141e6},id:"yxkj32p702XadPEd1roz"},{image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",createdAt:{seconds:1631959667,nanoseconds:56e6},text:"hello",email:"test@test.com",id:"lQrspxicNUb8j3Qatg6S"},{email:"test@test.com",createdAt:{seconds:1631959548,nanoseconds:466e6},image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",text:"hello",uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",id:"Vejx2p3AfTSZZqxKsmUB"},{uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",createdAt:{seconds:1631959426,nanoseconds:579e6},email:"test@test.com",text:"wow",image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",id:"nPrvjsMZHSyWmyKFZ1ot"},{uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",email:"test@test.com",image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",createdAt:{seconds:1631959420,nanoseconds:276e6},text:"hello",id:"T32Avx9PAU2qsrS7brpt"},{createdAt:{seconds:1631957548,nanoseconds:554e6},text:"Jsjsn",image:"https://avatars.dicebear.com/api/gridy/mobile.svg?background=%239999ff",email:"mobile@mobile.com",uid:"1zhKTV1hU1g4clxV24asIU9XjIM2",id:"xnTNAaFY7loVSzLsxqdP"},{text:"Usus",uid:"1zhKTV1hU1g4clxV24asIU9XjIM2",email:"mobile@mobile.com",createdAt:{seconds:1631957546,nanoseconds:169e6},image:"https://avatars.dicebear.com/api/gridy/mobile.svg?background=%239999ff",id:"WAnxQJKpJ7Xf6cFM863y"},{createdAt:{seconds:1631957541,nanoseconds:875e6},uid:"1zhKTV1hU1g4clxV24asIU9XjIM2",image:"https://avatars.dicebear.com/api/gridy/mobile.svg?background=%239999ff",email:"mobile@mobile.com",text:"Hello",id:"GUU4AqN5VGCVPf50DYT8"},{createdAt:{seconds:1631957529,nanoseconds:662e6},email:"mobile@mobile.com",image:"https://avatars.dicebear.com/api/gridy/mobile.svg?background=%239999ff",uid:"1zhKTV1hU1g4clxV24asIU9XjIM2",text:"Gello",id:"0ee9SgJQqwalXnvPeqKW"},{uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",text:"bjlbaf",email:"test@test.com",image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",createdAt:{seconds:1631957493,nanoseconds:866e6},id:"7X1rAACI60HGevqX3eMJ"},{email:"test@test.com",text:"abhcjlabfc",uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",createdAt:{seconds:1631957493,nanoseconds:3e7},id:"D4GfjRrGdFrvhslLDoPM"},{image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",createdAt:{seconds:1631957492,nanoseconds:19e7},text:"hcalbhfjla'",uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",email:"test@test.com",id:"j1oHq2ADRJ0PscgYXuc0"},{uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",email:"test@test.com",text:"hflahfiop",createdAt:{seconds:1631957491,nanoseconds:222e6},id:"6zbWu7EtVntZjaUs6Y44"},{image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",email:"test@test.com",createdAt:{seconds:1631957488,nanoseconds:23e6},text:"hello",uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",id:"TCvgKP0G9vfelhDdYVTL"},{image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",text:"hello",uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",email:"test@test.com",createdAt:{seconds:1631957451,nanoseconds:722e6},id:"KqukKEh0T8azRDX6ToNM"},{email:"mobile@mobile.com",image:"https://avatars.dicebear.com/api/gridy/mobile.svg?background=%239999ff",createdAt:{seconds:1631957154,nanoseconds:822e6},text:"Hello",uid:"1zhKTV1hU1g4clxV24asIU9XjIM2",id:"Uk1go9UwCKw2odMhqEbp"},{uid:"1zhKTV1hU1g4clxV24asIU9XjIM2",createdAt:{seconds:1631957132,nanoseconds:929e6},email:"mobile@mobile.com",image:"https://avatars.dicebear.com/api/gridy/mobile.svg?background=%239999ff",text:"Hello",id:"L6aKOdUgm7NxaeiYioQM"},{uid:"1zhKTV1hU1g4clxV24asIU9XjIM2",text:"",createdAt:{seconds:1631957130,nanoseconds:818e6},image:"https://avatars.dicebear.com/api/gridy/mobile.svg?background=%239999ff",email:"mobile@mobile.com",id:"SToijJOEB9oMR4pEZzzx"},{createdAt:{seconds:1631957088,nanoseconds:678e6},image:"https://avatars.dicebear.com/api/gridy/mobile.svg?background=%239999ff",text:"How",email:"mobile@mobile.com",uid:"1zhKTV1hU1g4clxV24asIU9XjIM2",id:"mvmhWhkAQmkaXXqLweV2"},{createdAt:{seconds:1631957029,nanoseconds:887e6},email:"mobile@mobile.com",text:"HELLO",uid:"1zhKTV1hU1g4clxV24asIU9XjIM2",image:"https://avatars.dicebear.com/api/gridy/mobile.svg?background=%239999ff",id:"bIJ3e1I0nu5UcgqrBRAx"},{text:"this sucks",uid:"0hpUaD4V6fQNGHMpG0tvj2JwtH62",image:"https://avatars.dicebear.com/api/gridy/test.svg?background=%239999ff",createdAt:{seconds:1631956998,nanoseconds:677e6},email:"test@test.com",id:"jB5WindTdrf4VZewi4Fa"}]};return Object(x.jsx)(V.Provider,{value:t,children:e.children})};var G=function(e){var t=v(),a=t.currentUser,c=t.editProfile,r=Object(s.useState)(""),n=Object(d.a)(r,2),o=n[0],i=n[1],l=Object(s.useRef)(),b=Object(s.useRef)(),u=Object(s.useRef)();return Object(x.jsxs)("div",{className:"".concat(e.className?e.className:"hidden md:block h-screen md:w-1/3 max-h-screen overflow-y-auto bg-gray-600"," "),children:[Object(x.jsxs)("div",{className:"h-1/5 bg-gray-900 text-white flex flex-col items-center justify-center",children:[Object(x.jsx)("img",{alt:"user profile",className:"w-20 h-20 rounded-full",src:null===a.photoURL?"https://avatars.dicebear.com/api/gridy/".concat(a.email.substring(0,a.email.lastIndexOf("@")),".svg?background=%239999ff"):a.photoURL}),Object(x.jsx)("span",{className:"mt-4",children:a.email.substring(0,a.email.lastIndexOf("@"))})]}),Object(x.jsxs)("div",{className:"flex flex-col items-center justify-start text-white space-y-3",children:[Object(x.jsxs)("span",{className:"mt-2",children:["Name: ",a.displayName]}),Object(x.jsx)("input",{ref:u,className:"bg-gray-800 w-3/4 h-8 border-gray-300 border border-solid rounded-sm",type:"text",placeholder:"Set Display Name"}),Object(x.jsxs)("span",{className:"mt-2",children:["Email: ",a.email]})]}),Object(x.jsx)("div",{children:Object(x.jsxs)("form",{className:"flex flex-col items-center justify-center mt-5 text-white space-y-3 border-top",children:[Object(x.jsx)("label",{children:"Enter Email and Password to Save Changes"}),Object(x.jsx)("input",{ref:l,className:"bg-gray-800 w-3/4 h-8 border-gray-300 border border-solid rounded-sm",type:"text",placeholder:"Enter email"}),Object(x.jsx)("label",{children:"Enter Password"}),Object(x.jsx)("input",{ref:b,className:"bg-gray-800 w-3/4 h-8 border-gray-300 border border-solid rounded-sm",type:"password",placeholder:"Enter Old password"}),Object(x.jsx)("button",{onClick:function(e){e.preventDefault(),c(l.current.value,b.current.value,u.current.value,i)},className:"bg-gray-800 p-2 px-3 rounded-md hover:border-2 border-gray-300 border-solid",children:"Save Changes"}),Object(x.jsx)("p",{children:o})]})})]})},D=a(36);function I(e){var t=v().currentUser,a=e.item.uid===t.uid;return Object(x.jsx)("div",{className:"w-full flex ".concat(a?"flex-row-reverse":"flex-row"),children:Object(x.jsxs)("div",{className:"w-max p-2 text-sm flex items-center justify-center rounded-xl bg-gray-800 text-white m-2 ".concat(a?"flex-row-reverse":"flex-row"),children:[Object(x.jsx)("img",{src:e.item.image,className:"w-8 h-8 rounded-full ".concat(a?"ml-2":"mr-2"),alt:"t"}),Object(x.jsxs)("div",{className:"flex flex-col justify-between ".concat(a?"items-end pr-1 pl-2":"items-start pl-1z` pr-2"," "),children:[Object(x.jsx)("span",{className:"text-xs text-gray-400",children:null!==t.displayName?t.displayName:e.item.email.substring(0,e.item.email.lastIndexOf("@"))}),Object(x.jsx)("span",{children:e.item.text})]})]})})}function M(e){var t=A().data;t.sort((function(e,t){return t.createdAt-e.createdAt}));var a=Object(s.useRef)();return Object(x.jsxs)("div",{className:"h-[calc(100%-8rem)] flex flex-col-reverse",children:[Object(x.jsx)("div",{className:"main w-full min-w-full max-h-[calc(100vh-8rem-56px)] sm:max-h-[calc(100vh-8rem)] overflow-y-auto flex justify-start flex-col-reverse relative",children:0!==t.length&&t.map((function(e){return void 0!==a.current&&a.current.scrollIntoView({behaviour:"smooth"}),Object(x.jsx)(I,{item:e},e.id)}))}),Object(x.jsx)("div",{ref:a,children:" "})]})}var E=a(67),S=a(48);function J(e){var t=v().currentUser,a=Object(s.useState)(!1),c=Object(d.a)(a,2),r=c[0],n=c[1];return Object(x.jsxs)("header",{className:"w-full h-16 md:h-20 flex items-center justify-start bg-gray-800 p-2 z-[5] md:p-4 absolute top-0",children:[Object(x.jsx)("h2",{className:"text-white text-xl md:text-3xl",children:"#globalChat"}),Object(x.jsx)("div",{onClick:function(){n(!r)},className:"flex items-center w-max md:hidden absolute right-5 cursor-pointer ",children:Object(x.jsx)("img",{src:null===t.photoURL?"https://avatars.dicebear.com/api/gridy/".concat(t.email.substring(0,t.email.lastIndexOf("@")),".svg?background=%239999ff"):t.photoURL,alt:"user avatar",className:"w-10 h-10 object-contain rounded-full hover:scale-90 transform transition-all"})}),Object(x.jsx)(S.a,{container:e.closeRef,onOutsideClick:function(e){n(!1)},children:Object(x.jsx)(E.a,{in:r,mountOnEnter:!0,unmountOnExit:!0,classNames:"slide-in-right",timeout:200,children:Object(x.jsx)(G,{className:"w-[calc(20rem-4px)] h-[calc(100vh-3.6rem)] absolute top-0 right-0 bg-gray-600 transform transition-all z-10 shadow-2xl"})})})]})}function C(e){var t=v().currentUser,a=A().addData,s=Object(D.useState)(""),c=Object(d.a)(s,2),r=c[0],n=c[1];return Object(x.jsx)("div",{className:"h-16 w-full flex items-center justify-center p-2 absolute bottom-0",children:Object(x.jsxs)("form",{className:"flex w-full h-full items-stretch",children:[Object(x.jsx)("input",{className:"w-9/12 h-full border-gray-400 border-solid border-2 bg-gray-600",placeholder:"enter message",onChange:function(e){return n(e.target.value)},value:r}),Object(x.jsx)("button",{onClick:function(e){e.preventDefault();try{a(r,t)}catch(s){alert("error sending message"),console.log("error")}n("")},className:"mx-auto w-2/12 border-gray-400 border-solid border-2 h-full bg-gray-900 text-white disabled:bg-gray-600 disabled:text-gray-500 disabled:cursor-not-allowed",disabled:!r,children:"SEND"})]})})}function Q(){var e=Object(s.useState)(""),t=Object(d.a)(e,2),a=t[0],c=t[1],r=Object(D.useRef)();return Object(s.useEffect)((function(){c(r)}),[]),Object(x.jsxs)("div",{ref:r,className:"h-full w-full sm:w-11/12 md:w-2/3 flex flex-col justify-center overflow-y-auto bg-gray-500 relative",children:[Object(x.jsx)(J,{closeRef:a}),Object(x.jsx)(M,{getRef:function(e){console.log(e)}}),Object(x.jsx)(C,{})]})}var T=function(){return Object(x.jsxs)("div",{className:"w-full h-full relative flex flex-row items-center justify-center",children:[Object(x.jsx)(Q,{}),Object(x.jsx)(G,{})]})},R=function(){return Object(x.jsx)("div",{className:"h-screen max-h-[calc(100vh-56px)] sm:max-h-screen bg-green-500 overflow-y-auto overflow-x-hidden w-full min-w-full",children:Object(x.jsx)(u.a,{children:Object(x.jsx)(O,{children:Object(x.jsx)(H,{children:Object(x.jsxs)(b.d,{children:[Object(x.jsx)(k,{exact:!0,path:"/",component:T}),Object(x.jsx)(b.b,{path:"/signup",component:y}),Object(x.jsx)(b.b,{path:"/login",component:w})]})})})})})};n.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(R,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.58f1c8ea.chunk.js.map