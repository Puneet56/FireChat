(this.webpackJsonpfirechat=this.webpackJsonpfirechat||[]).push([[0],{63:function(e,t,r){},64:function(e,t,r){},65:function(e,t,r){"use strict";r.r(t);var c=r(7),a=r.n(c),n=r(32),s=r.n(n),l=r(0),o=r.n(l),i=r(1),d=r(11),u=r(12),b=r(31),j=r(45),m=r(26),h=r(21),f=(Object(j.a)({apiKey:"AIzaSyCpmtQ5VCMWu87EtJGnOThzWn_dBxtw7So",authDomain:"firechat-7c780.firebaseapp.com",projectId:"firechat-7c780",storageBucket:"firechat-7c780.appspot.com",messagingSenderId:"1069506190405",appId:"1:1069506190405:web:c677e8f6ec7ddd559d172c",measurementId:"G-343HMQP9M1"}),Object(m.c)()),x=Object(h.d)();Object(h.c)(x).catch((function(e){"failed-precondition"===e.code||e.code}));var O=r(6),p=Object(c.createContext)(),g=function(){return Object(c.useContext)(p)},v=function(e){var t=Object(c.useState)(),r=Object(d.a)(t,2),a=r[0],n=r[1],s=Object(c.useState)(!0),l=Object(d.a)(s,2),o=l[0],i=l[1];Object(c.useEffect)((function(){return Object(m.d)(f,(function(e){n(e),i(!1)}))}),[]);var u={currentUser:a,signup:function(e,t){return Object(m.b)(f,e,t)},login:function(e,t){return Object(m.f)(f,e,t)},logout:function(){return Object(m.g)(f)},editProfile:function(e,t,r,c){var n=m.a.credential(e,t);Object(m.e)(a,n).then((function(){null!==r&&""!==r&&Object(m.h)(f.currentUser,{displayName:r}).then((function(){c("DisplayName Updated sucessfully"),console.log("username updated sucessfully")})).catch((function(e){c("Error updating Display Name, Try again"),console.log("error updating username"),console.log(e)}))})).catch((function(e){c("Wrong Credentials"),console.log(e)}))}};return Object(O.jsx)(p.Provider,{value:u,children:!o&&e.children})},y=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),r=t[0],a=t[1],n=Object(c.useState)(""),s=Object(d.a)(n,2),l=s[0],j=s[1],m=g(),h=m.signup,f=m.currentUser,x=Object(c.useState)(""),p=Object(d.a)(x,2),v=p[0],y=p[1],w=Object(c.useState)(!1),N=Object(d.a)(w,2),S=N[0],E=N[1],k=Object(u.g)(),C=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a(""),j(""),e.prev=3,y(""),E(!0),e.next=8,h(r,l);case 8:k.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),y("Failed to SignUp"),console.log(e.t0);case 15:E(!1);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return console.log("signup",f),Object(O.jsxs)("div",{className:"h-screen items-center justify-center flex flex-col",children:[""!==v&&Object(O.jsx)("h1",{children:v}),Object(O.jsxs)("form",{className:"bg-gray-400 border border-solid rounded-lg m-2 flex flex-col items-center justify-center space-y-3 h-96 w-96",children:[Object(O.jsx)("h1",{children:"Signup"}),Object(O.jsx)("label",{children:"Enter Email"}),Object(O.jsx)("input",{className:"w-3/4 h-8 border-black border border-solid rounded-sm",type:"text",placeholder:"Enter email",value:r,onChange:function(e){return a(e.target.value)}}),Object(O.jsx)("label",{children:"Enter Password"}),Object(O.jsx)("input",{className:"w-3/4 h-8 border-black border border-solid rounded-sm",type:"password",placeholder:"Enter password",value:l,onChange:function(e){return j(e.target.value)}}),Object(O.jsx)("button",{type:"submit",disabled:S,className:"w-36 h-8 rounded-sm bg-blue-700 text-center border-solid border border-blue-700",onClick:C,children:"SignUp"}),Object(O.jsx)("h2",{children:"Already Have an Account? "}),Object(O.jsx)(b.b,{to:"/login",children:Object(O.jsx)("button",{className:"w-40 bg-green-500 h-8",children:"LogIn"})})]})]})},w=(r(63),r(64),function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),r=t[0],a=t[1],n=Object(c.useState)(""),s=Object(d.a)(n,2),l=s[0],j=s[1],m=g(),h=m.login,f=m.currentUser,x=Object(c.useState)(""),p=Object(d.a)(x,2),v=p[0],y=p[1],w=Object(c.useState)(!1),N=Object(d.a)(w,2),S=N[0],E=N[1],k=Object(u.g)(),C=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a(""),j(""),e.prev=3,y(""),E(!0),e.next=8,h(r,l);case 8:k.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),y("failed to login"),console.log(e.t0);case 15:E(!1);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return console.log("login",f),Object(O.jsxs)("div",{className:" h-screen items-center justify-center flex flex-col",children:[""!==v&&Object(O.jsx)("h1",{children:v}),Object(O.jsxs)("form",{className:"bg-gray-400 border border-solid rounded-lg m-2 flex flex-col items-center justify-center space-y-4 h-96 w-96",children:[Object(O.jsx)("h1",{children:"Login"}),Object(O.jsx)("label",{children:"Enter Email"}),Object(O.jsx)("input",{className:"w-3/4 h-8 border-black border border-solid rounded-sm",type:"text",placeholder:"Enter email",value:r,onChange:function(e){return a(e.target.value)}}),Object(O.jsx)("label",{children:"Enter Password"}),Object(O.jsx)("input",{className:"w-3/4 h-8 border-black border border-solid rounded-sm",type:"password",placeholder:"Enter password",value:l,onChange:function(e){return j(e.target.value)}}),Object(O.jsx)("button",{type:"submit",disabled:S,className:"w-36 h-8 mt-5 rounded-sm bg-blue-700 text-center border-solid border border-blue-700",onClick:C,children:"Login"}),Object(O.jsx)("h2",{children:"Do not Have an Account? "}),Object(O.jsx)(b.b,{to:"/signup",children:Object(O.jsx)("button",{className:"w-40 bg-green-500 h-8",children:"SignUp"})})]})]})}),N=r(28),S=r(49),E=function(e){var t=e.component,r=Object(S.a)(e,["component"]),c=g().currentUser;return Object(O.jsx)(u.b,Object(N.a)(Object(N.a)({},r),{},{render:function(e){return c?Object(O.jsx)(t,Object(N.a)({},e)):Object(O.jsx)(u.a,{to:"/login"})}}))},k=Object(c.createContext)(),C=function(){return Object(c.useContext)(k)},U=function(e){var t=Object(c.useState)([]),r=Object(d.a)(t,2),a=r[0],n=r[1];Object(c.useEffect)((function(){var e=Object(h.h)(Object(h.b)(x,"messages"),Object(h.g)("createdAt","desc"),Object(h.e)(11));return console.log("happened"),Object(h.f)(e,(function(e){n(e.docs.map((function(e){return Object(N.a)(Object(N.a)({},e.data()),{},{id:e.id})})))}))}),[]);var s={addData:function(e,t){return Object(h.a)(Object(h.b)(x,"messages"),{text:e,createdAt:Object(h.i)(),displayName:t.displayName,email:t.email,uid:t.uid,image:null===t.photoURL?"https://avatars.dicebear.com/api/gridy/".concat(t.email.substring(0,t.email.lastIndexOf("@")),".svg?background=%239999ff"):t.photoURL})},data:a};return Object(O.jsx)(k.Provider,{value:s,children:e.children})};var R=function(e){var t=g(),r=t.currentUser,a=t.editProfile,n=Object(c.useState)(""),s=Object(d.a)(n,2),l=s[0],o=s[1],i=Object(c.useRef)(),u=Object(c.useRef)(),b=Object(c.useRef)();return Object(O.jsxs)("div",{className:"".concat(e.className?e.className:"hidden md:block h-screen md:w-1/3 max-h-screen overflow-y-auto bg-gray-600"," "),children:[Object(O.jsxs)("div",{className:"h-1/5 bg-gray-900 text-white flex flex-col items-center justify-center",children:[Object(O.jsx)("img",{alt:"user profile",className:"w-20 h-20 rounded-full",src:null===r.photoURL?"https://avatars.dicebear.com/api/gridy/".concat(r.email.substring(0,r.email.lastIndexOf("@")),".svg?background=%239999ff"):r.photoURL}),Object(O.jsx)("span",{className:"mt-4",children:null===r.displayName?r.email.substring(0,r.email.lastIndexOf("@")):r.displayName})]}),Object(O.jsxs)("div",{className:"flex flex-col items-center justify-start text-white space-y-3",children:[Object(O.jsxs)("span",{className:"mt-2",children:["Name: ",r.displayName]}),Object(O.jsx)("input",{ref:b,className:"bg-gray-800 w-3/4 h-8 border-gray-300 border border-solid rounded-sm",type:"text",placeholder:"Set Display Name"}),Object(O.jsxs)("span",{className:"mt-2",children:["Email: ",r.email]})]}),Object(O.jsx)("div",{children:Object(O.jsxs)("form",{className:"flex flex-col items-center justify-center mt-5 text-white space-y-3 border-top",children:[Object(O.jsx)("label",{children:"Enter Email and Password to Save Changes"}),Object(O.jsx)("input",{ref:i,className:"bg-gray-800 w-3/4 h-8 border-gray-300 border border-solid rounded-sm",type:"text",placeholder:"Enter email"}),Object(O.jsx)("label",{children:"Enter Password"}),Object(O.jsx)("input",{ref:u,className:"bg-gray-800 w-3/4 h-8 border-gray-300 border border-solid rounded-sm",type:"password",placeholder:"Enter Old password"}),Object(O.jsx)("button",{onClick:function(e){e.preventDefault(),a(i.current.value,u.current.value,b.current.value,o)},className:"bg-gray-800 p-2 px-3 rounded-md hover:border-2 border-gray-300 border-solid",children:"Save Changes"}),Object(O.jsx)("p",{children:l})]})})]})},D=r(37);function I(e){var t=g().currentUser,r=e.item.uid===t.uid;return Object(O.jsx)("div",{className:"w-full flex ".concat(r?"flex-row-reverse":"flex-row"),children:Object(O.jsxs)("div",{className:"w-max p-2 text-sm flex items-center justify-center rounded-xl bg-gray-800 text-white m-2 ".concat(r?"flex-row-reverse":"flex-row"),children:[Object(O.jsx)("img",{src:e.item.image,className:"w-8 h-8 rounded-full ".concat(r?"ml-2":"mr-2"),alt:"t"}),Object(O.jsxs)("div",{className:"flex flex-col justify-between ".concat(r?"items-end pr-1 pl-2":"items-start pl-1z` pr-2"," "),children:[Object(O.jsx)("span",{className:"text-xs text-gray-400",children:e.item.displayName}),Object(O.jsx)("span",{children:e.item.text})]})]})})}function L(e){var t=C().data;t.sort((function(e,t){return t.createdAt-e.createdAt}));var r=Object(c.useRef)();return Object(O.jsxs)("div",{className:"h-[calc(100%-8rem)] flex flex-col-reverse",children:[Object(O.jsx)("div",{className:"main w-full min-w-full max-h-[calc(100vh-8rem-56px)] sm:max-h-[calc(100vh-8rem)] overflow-y-auto flex justify-start flex-col-reverse relative",children:0!==t.length&&t.map((function(e){return void 0!==r.current&&r.current.scrollIntoView({behaviour:"smooth"}),Object(O.jsx)(I,{item:e},e.id)}))}),Object(O.jsx)("div",{ref:r,children:" "})]})}var P=r(67),A=r(48);function z(e){var t=g(),r=t.currentUser,a=t.logout,n=Object(c.useState)(!1),s=Object(d.a)(n,2),l=s[0],o=s[1];return Object(O.jsxs)("header",{className:"w-full h-16 md:h-20 flex items-center justify-between bg-gray-800 p-2 z-[5] md:p-4 absolute top-0",children:[Object(O.jsx)("h2",{className:"text-white text-xl md:text-3xl",children:"#globalChat"}),Object(O.jsx)("button",{className:"bg-gray-500 p-2 px-3 rounded-md hover:border-2 border-gray-300 border-solid",onClick:a,children:"SignOut"}),Object(O.jsx)("div",{onClick:function(){o(!l)},className:"flex items-center w-max md:hidden absolute right-5 cursor-pointer ",children:Object(O.jsx)("img",{src:null===r.photoURL?"https://avatars.dicebear.com/api/gridy/".concat(r.email.substring(0,r.email.lastIndexOf("@")),".svg?background=%239999ff"):r.photoURL,alt:"user avatar",className:"w-10 h-10 object-contain rounded-full hover:scale-90 transform transition-all"})}),Object(O.jsx)(A.a,{container:e.closeRef,onOutsideClick:function(e){o(!1)},children:Object(O.jsx)(P.a,{in:l,mountOnEnter:!0,unmountOnExit:!0,classNames:"slide-in-right",timeout:200,children:Object(O.jsx)(R,{className:"w-[calc(20rem-4px)] h-[calc(100vh-3.6rem)] absolute top-0 right-0 bg-gray-600 transform transition-all z-10 shadow-2xl"})})})]})}function M(e){var t=g().currentUser,r=C().addData,c=Object(D.useState)(""),a=Object(d.a)(c,2),n=a[0],s=a[1];return Object(O.jsx)("div",{className:"h-16 w-full flex items-center justify-center p-2 absolute bottom-0",children:Object(O.jsxs)("form",{className:"flex w-full h-full items-stretch",children:[Object(O.jsx)("input",{className:"w-9/12 h-full border-gray-400 border-solid border-2 bg-gray-600",placeholder:"enter message",onChange:function(e){return s(e.target.value)},value:n}),Object(O.jsx)("button",{onClick:function(e){e.preventDefault();try{r(n,t)}catch(c){alert("error sending message"),console.log("error")}s("")},className:"mx-auto w-2/12 border-gray-400 border-solid border-2 h-full bg-gray-900 text-white disabled:bg-gray-600 disabled:text-gray-500 disabled:cursor-not-allowed",disabled:!n,children:"SEND"})]})})}function B(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),r=t[0],a=t[1],n=Object(D.useRef)();return Object(c.useEffect)((function(){a(n)}),[]),Object(O.jsxs)("div",{ref:n,className:"h-full w-full sm:w-11/12 md:w-2/3 flex flex-col justify-center overflow-y-auto bg-gray-500 relative",children:[Object(O.jsx)(z,{closeRef:r}),Object(O.jsx)(L,{getRef:function(e){console.log(e)}}),Object(O.jsx)(M,{})]})}var H=function(){return Object(O.jsxs)("div",{className:"w-full h-full relative flex flex-row items-center justify-center",children:[Object(O.jsx)(B,{}),Object(O.jsx)(R,{})]})},J=function(){return Object(O.jsx)("div",{className:"h-screen max-h-[calc(100vh-56px)] sm:max-h-screen bg-green-400 overflow-y-auto overflow-x-hidden w-full min-w-full",children:Object(O.jsx)(b.a,{children:Object(O.jsx)(v,{children:Object(O.jsx)(U,{children:Object(O.jsxs)(u.d,{children:[Object(O.jsx)(E,{exact:!0,path:"/",component:H}),Object(O.jsx)(u.b,{path:"/signup",component:y}),Object(O.jsx)(u.b,{path:"/login",component:w})]})})})})})};s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(J,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.ab661caf.chunk.js.map